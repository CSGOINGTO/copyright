<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<form onsubmit="return false;">
    <input type="hidden" name="file_base64" id="file_base64">
    <input type="file" id="fileup">
    <input type="submit" value="submit" onclick="getbase64()">
</form>
<script>
    function getBase64Image(img) {
        var canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, img.width, img.height);
        var ext = img.src.substring(img.src.lastIndexOf(".")+1).toLowerCase();
        var dataURL = canvas.toDataURL("image/"+ext);
        return dataURL;
    }
    function getbase64(){
        var img = "/Users/mac/Desktop/One.png";
        var image = new Image();
        image.src = img;
        var base64 = getBase64Image(image);
        // 去除base64的头部信息
        base64 = base64.split(',')[0];
        var json = {};
        json.prefix = [".png"];
        json.base64s = [base64];
        var JsonStr = JSON.stringify(json);
        console.log(JsonStr);
    }
</script>
</html>